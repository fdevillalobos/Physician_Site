<%- model_class = Physician -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize.titleize %></h1>
</div>


<%= form_tag(physicians_path, :method => "get", id: "search-form") do %>
    <%= text_field_tag :search, params[:search], placeholder: "Search Physicians" %>
    <%= submit_tag "Search", :name => nil %>
<% end %>


<table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:id) %></th>
      <th><%= model_class.human_attribute_name(:name) %></th>
      <th><%= model_class.human_attribute_name(:email) %></th>
      <th><%= model_class.human_attribute_name(:country_id) %></th>
      <th><%= model_class.human_attribute_name(:state_id) %></th>
      <th><%= model_class.human_attribute_name(:medical_school_id) %></th>
      <th><%= model_class.human_attribute_name(:NPI) %></th>
      <th><%= model_class.human_attribute_name(:gender_id) %></th>
      <th><%= model_class.human_attribute_name(:birth) %></th>
      <th><%= model_class.human_attribute_name(:phone) %></th>
      <th><%= model_class.human_attribute_name(:residency_hospital_id) %></th>
      <th><%= model_class.human_attribute_name(:affiliation_hospital_id) %></th>
      <th><%= model_class.human_attribute_name(:credential_id) %></th>
      <th><%= model_class.human_attribute_name(:group_practice_id) %></th>
      <th><%= model_class.human_attribute_name(:created_at) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    <% @physicians.each do |physician| %>
      <tr>
        <td><%= link_to physician.id, physician_path(physician) %></td>
        <td><%= link_to physician.name, physician_path(physician) %></td>
        <td><%= physician.email %></td>
        <td><%= physician.country.name unless physician.country.nil? %></td>
        <td><%= physician.state.name unless physician.state.nil? %></td>
        <td><%= physician.medical_school.name unless physician.medical_school.nil? %></td>
        <td><%= physician.NPI %></td>
        <td><%= physician.gender.sex %></td>
        <td><%= physician.birth %></td>
        <td><%= physician.phone %></td>
        <td><%= physician.residency_hospital.name unless physician.residency_hospital.nil? %></td>
        <td><%= physician.affiliation_hospital.name unless physician.affiliation_hospital.nil? %></td>
        <td><%= physician.credential.name %></td>
        <td><%= physician.group_practice.name unless physician.group_practice.nil? %></td>
        <td><%= physician.specialties.select(:name).map(&:name).join(', ') %></td>
        <td><%= physician.created_at.to_formatted_s(:short) %></td>
        <td>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_physician_path(physician), :class => 'btn btn-default btn-xs' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      physician_path(physician),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'btn btn-xs btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to t('.new', :default => t("helpers.links.new")),
            new_physician_path,
            :class => 'btn btn-primary' %>